using RomUtilities;
using System;
using System.Collections.Generic;
using System.IO.Compression;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace FF1Lib
{
	public partial class StandardMaps
	{
		public void RandomVampireAttack(bool vampireattack, bool lefeinHospitality, bool includeConeria, MT19337 rng)
		{
			// Essentially picks a random town to have the vampire attack rather than Melmond.
			// I mean, it could randomly pick Melmond in which case it's just vanilla.
			// Otherwise, though, it replaces Melmond's map with a "fixed" version and the
			// rolled map with a "destroyed" version that has no clinic or item shop.

			if (!vampireattack)
			{
				return;
			}


			// These are just hard-coded maps (layouts courtesy of DarkmoonEX)
			const string repaired_melmond = "4747474747474747470A0404040404040404040404040B2F2F2F2F2F2F0027474747474747474747474747474747474747474747474747474747474747474747474747474747470A0405020E000E1717170F0F0F000003040B2F00002F2F2747474747474747474747474747474747474747474747474747474747474747474747474747470A04050200000000001822180F0F0F0E00000003040B00000027474747474747474747474747474747474747474747474747474747474747474747474747470A05020000000E0F0F0F1D461D0F0F0F0E0000000000030B002727474747474747474747474747474747474747474747474747474747474747474747474747470A0100000000000E0E0E0E100E0E0E0E000000000000000D0027004747474747474747474747474747474747474747474747474747474747474747474747470305020000000000111010101010101010101010101010101010270047474747474747474747474747474747474747474747474747474747474747474747101010101010101010101400272727272727272B2727272727272727270047474747474747474747474747474747474747474747474747474747474747474747100B000000000000000000002700000A040405100B00000000002727270047474747474747474747474747474747474747474747474747474747474747474747100C00000000272727272727270A05050210101003040B0011101010272727274747474747474747474747474747474747474747474747474747474747474747100C00000027270000000000000A01000010171717000C0010171717100A01274747474747474747474747474747474747474747474747474747474747474747100C303030271717171717000A05022F2F1018211801030B101B1A1B150A01272727272727270047474747474747474747474747474747474747474747474747100C272727271818181818000A00000000101D2D1D02310C101C651C160A01474747474747274747474747474747474747474747474747474747474747474747100C303030301D1D251D1D010A000000001310100000000C10101010100A01474747474747272727272747474747474747474747474747474747474747474747100C000000001D1D701D1D0205000000000000100000000C10171717100A01474747474747474747472747474747474747474747474747474747474747474747100C000000000000381010101010101010101010000A050D10182018100A01474747474747474747472727474747474747474747474747474747474747474747100D00000000000010000000000303050B0000100A050200101D771D100A014747474747474747474747474747474747474747474747474747474747474747471010101210101010140000000000000003030B100400000013101010100A01474747474747474747474747474747474747474747474747474747474747474747000B000000000010000000000017171700000D1000000E000E001010140A01474747474747474747474747474747474747474747474747474747474747474747000C0000000000100000000000182318010000101010101010101014000A0147474747474747474747474747474747474747474747474747474747474747474700030B000000001000000000001C521C020000100E000E000E000E0A04040247474747474747474747474747474747474747474747474747474747474747474700000C00000E0010101010101010101010101014000000000000000A0100004747474747474747474747474747474747474747474747474747474747474747474700030B0F0F0F100E0E0E100E0E0E0E0E10000000000000000A04040247474747474747474747474747474747474747474747474747474747474747474747474700000C0F0F0F100E0E0E10000000000010171717000000000A01000047474747474747474747474747474747474747474747474747474747474747474747474747000C0E0E0E13101010100E0E0E0E0E10182418010000000A014747474747474747474747474747474747474747474747474747474747474747474747474747470003030B0E0E0E102E103030303030101C5C1C0200000A040247474747474747474747474747474747474747474747474747474747474747474747474747474700000003040B0E131010101010101010103814000A04040200474747474747474747474747474747474747474747474747474747474747474747474747474747474700000003040B000000000000000000000A04040200474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000030404040000000000000404020000474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000004747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747004747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747274747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747472747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747274747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747472747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747274747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747472747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747274747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747472747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727474747474747474747474747474747474747474747474747474747474747474747";
			const string blighted_coneria = "0B03030303030303030303030303052F102F030404040404040404040404040B47474747474747474747474747474747474747474747474747474747474747470C2F0E0E000000000000002F2F2F2F2F102F2F2F2F2F2F2F2F2F2F2F2F2F2F0C47474747474747474747474747474747474747474747474747474747474747470C2F171717001717170000322F272F00100032320F0F00101915002F2F0E0E0C47474747474747474747474747474747474747474747474747474747474747470C0018241801182318013232002700001000320F0F0E32101818010E2F27000C47474747474747474747474747474747474747474747474747474747474747470C001C591C021C4F1C020032102A101010000E0E0E32321C161C02002F27000C47474747474747474747474747474747474747474747474747474747474747470C0000380000003800000010002700001000000000003232103232000027000C47474747474747474747474747474747474747474747474747474747474747470C0032321010101032321032322700001000000000303000103230300027000C47474747474747474747474747474747474747474747474747474747474747470C0032000000003232000000322727272B272727272727272B2727272727320C47474747474747474747474747474747474747474747474747474747474747470C0000001717171700171717170000001000000000000000103210171527000C47474747474747474747474747474747474747474747474747474747474747470C2F000018182218011818211801000E100E000000000000100010181828000C47474747474747474747474747474747474747474747474747474747474747470C2F2F001D1D431D021D1D1E1D021110101010000000000010321D161C29000E47474747474747474747474747474747474747474747474747474747474747470C2F2F2F0000383200000038000E10101010100E00000032323200103227002F47474747474747474747474747474747474747474747474747474747474747470C2F0E0E000013101032321010101010323210101010101010101010102A000047474747474747474747474747474747474747474747474747474747474747470C2F31320000000000003232320E10103232323200000000000000000027000E47474747474747474747474747474747474747474747474747474747474747470C0E32320000000000000032000013101032320032272727272727272727000E474747474747474747474747474747474747474747474747474747474747474703040404040404040B1717171717000E323200003227000A0404040404040405474747474747474747474747474747474747474747474747474747474747474747474747474747470C18181818180000100000323227000A0147474747474700474747474747474747474747474747474747474747474747474747474747474747474747474747470C1D1D251D1D010E100E32320027000A0147474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470C1D1D6D1D1D0232100000323227000A0147474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470C00003800003232100E00000027000A0147474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470C00301030320032320000000027000A0147474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470C00001310101010103232322F272F0A0147474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470C0000000000000E100E32000E0E2F0A0147474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470304040404050E0E10323203030505050247474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747";
			const string blighted_pravoka = "0A040404040404040404040404040404040404040404040404040404040404040404040404040B474747474747474747474747474747474747474747474747470A282727272727272727272727272727171717171717172727272727272727272727272727270C474747474747474747474747474747474747474747474747470A2817171717171710101010101010271B18181B18181B2810171717171710101010101010270C004747474747474747474747474747474747474747474747470A281B181B18181B10101010101010281D1D1D251D1D1D28101B181B181B10101717171010280C004747474747474747474747474747474747474747474747470A281D1D1D1D1D1D15101717171717281D1D1D6E1D1D1D28101D1D1D1D1D15321B231B1510280C004747474747474747474747474747474747474747474747470A281D1D1D161D1D16101B181B181B281010103810101029101D1D1D1D1D16321C501C1610280C004747474747474747474747474747474747474747474747470A2810101010323232101D1D1D1D1D282727272B2727272710321010101010101038321010280C004747474747474747474747474747474747474747474747470A2810101010103232321D1D1D1D1D28272710101028272732321017171010171010101010280C004747474747474747474747474747474747474747474747470A2810101010323210103232101010282710101010322827321018151B10101B18151B1510280C004747474747474747474747474747474747474747474747470A28101010321017171717171010102810100E000E3232281D1518181D15101D1D161D1610280C004747474747474747474747474747474747474747474747470A2810171717101B181B181B10103210100E0000000010101D1D161D1D16101D1D1D1D1032280C004747474747474747474747474747474747474747474747470A28101B181B101D1D1D171717171710100000000032101010101010101010101010103232280C004747474747474747474747474747474747474747474747470A28101D1D1D151D1D1D1B181B181B10100E00000032323210171717171010171717171710280C004747474747474747474747474747474747474747474747470A28101D1D1D161010101D1D1D1D1D2810100E0032323229101B18181B10101B181B181B10280C004747474747474747474747474747474747474747474747470A2810101010101010101D1D161D1D282710101032322927101D1D1D1D15101D1D1D1D1D15280C004747474747474747474747474747474747474747474747470A2810101010101010101010101010102827101032282710101D1D1D1D16101D1D16171717280C004747474747474747474747474747474747474747474747470A2817171710101717171717101010101028101032281010101017103232103232101B241B280C004747474747474747474747474747474747474747474747470A281B181B10101B181B181B10101717172810323228101010101B323232171717101D5A1D280C004747474747474747474747474747474747474747474747470A281D1D1D15101D1D17171717171B221B28103232283210101D1D1532101B211B15103810280C004747474747474747474747474747474747474747474747470A281D1D1D16101D1D1B181B181B1C441C283232102832101D1D171717171D1F1D16101010280C004747474747474747474747474747474747474747474747470A28323232101010101D1D1D1D1D1538102832101028323210101B18181B10381717171710280C004747474747474747474747474747474747474747474747470A28323210171510101D1D161D1D1610102832101028103232101D1D1D1D15101B18181B10280C004747474747474747474747474747474747474747474747470A281010101818151010101010101010102810101028323232101D1D161D16101D1D1D1D15280C004747474747474747474747474747474747474747474747470A2832101D161C161010101010101010102832101028101717171717101010101D1D161D16280C004747474747474747474747474747474747474747474747470A283232101010323232101010101B10102832101028101B181B181B101010101010101010280C004747474747474747474747474747474747474747474747470A281017151010103232323210321D15322832321028101D1D1D1D1D151017171717101010280C004747474747474747474747474747474747474747474747470A28101B1610101B1010323232101D16322832323228101D1D161D1D16101B18181B101010280C004747474747474747474747474747474747474747474747470A28101D1D161D1D151010103232101010293232102810101010323210101D1D1D1D151010280C004747474747474747474747474747474747474747474747470A28101D161D1D1D161010323228272727273232102827272727321010101D1D1D1D161032280C004747474747474747474747474747474747474747474747470A281010101010101032323232290B32323232101000000E0A273232321010101010101010290C004747474747474747474747474747474747474747474747470A282727272727272727272727270C32320032101000000E0A282727272727272727272727270C004747474747474747474747474747474747474747474747470607070707070707070707070707090E320010101000000E060707070707070707070707070709004747474747474747474747474747474747474747474747474747474747474747474747474747470E320010101000000E4747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747";
			const string blighted_elfland = "470F0F0F0F0F0F0F0F0E0E0E0E0E0E0E0000000000000000000000000000000E0E0E0E0E0E0E0E000000474747474747474747474747474747474747474747470F0F0F0F0F0F0F0F0F272727272727272727270000000000000000000000003200000000000000000E0E474747474747474747474747474747474747474747470F1717170F0F0F0F0F0F0F0F17171700000027000E0F0F00000000000000323200003232000000000000474747474747474747474747474747474747474747470F1824180F0F0F0F0F0F0F0E1823180100002A00000E0F0F000000000032323232323200000000000000474747474747474747474747474747474747474747470E1C5E1C0E0F0F0F0F0E0E001C541C020000270000000F0F0F00000000000032000032323200000000004747474747474747474747474747474747474747474700003932320F0F0F0E000000003900323232270000000E0F0F000000323232323232320000000000000047474747474747474747474747474747474747474747000032320F0F0F0E32323232000032320F0F27000000000F0F0F32323200003232323232000000000000474747474747474747474747474747474747474747470F0F00320E0E0E323232000000000F0F0F0F272F2F00000E0F0F0F0F0000000032000000000000000000474747474747474747474747474747474747474747470F0F0F00000032323200000032320F0F0F0F272F2F0000000E0E0F0F0F0F0F0F0F0F0F00000000000000474747474747474747474747474747474747474747470F0F0F0F00000032000F0F0F0F0F0F0F0F0E272F2F2F000000000E0F0F0F0F0F0E0E0E0E0E0000000000474747474747474747474747474747474747474747470F0F0F0F0000000F0F0F0F0F0F0F0F0F0F27272F2F2F2F000000000E0E0F0F0E007F2F2F000E0F000000474747474747474747474747474747474747474747470F0F0F0E00000F0F0F0F0F0F0F0F0F0F0F272F2F2F2F2F00000000000E0F0F0E3200320000000E00000E474747474747474747474747474747474747474747470F0F0F272B270F0F0F0F0F0F0F0E0E0E0E272F2F2F2F2F00000F0F1717170F323232320000000000000E474747474747474747474747474747474747474747470F0F0F00000F0F0F0F0E0E0E0E2727272727272F2F2F00000F0F0F1823180E320F0F0F0F0F0F0F000000474747474747474747474747474747474747474747470E0F0F00000F0F0F0E27272727270010171527000000000E0E0F0F1C511C02000E0F0F0F0F0F0F00000047474747474747474747474747474747474747474747000F0F00320F0F0E00320000000000101818282727000000000E0E0039000000000E0E0E0F0F0E00000047474747474747474747474747474747474747474747470F0F32320E0E32323200003232321D161C020027272B272727272727272727272727270E0E0000000F47474747474747474747474747474747474747474747470F0F000032323200323232323232320000003232320000000F0F171717000000000000000000000F0F47474747474747474747474747474747474747474747470E0F0F00000000000000000032323200003232320000000F0F0F182418010000000F1717171717170F4747474747474747474747474747474747474747474747470F0F0F0000000000000000003232323232000F0F0F0F0F0F0F1C5B1C02000F0F0F1825181818180F4747474747474747474747474747474747474747474747470F0F0F0F0F0F0F0F0000000000000F0F0F0F0F0F0F0F0F0F0F0F390032000F0F0F1D6F1D1D1D1D0F4747474747474747474747474747474747474747474747470E0F0F0F0F0F0F0E0000000F0F0F0F0F0E0E0F1010100F0F0F0F323232320E0E0E0E3932320E0E0E474747474747474747474747474747474747474747474747470E0F0F0F0F0F0000000F0F0F0F0F0E000010101915170E0E0E0F0F0F323232101032101010101047474747474747474747474747474747474747474747474747470E0E0F0F0F000F0F0F0F0F0F0F0000001B1518181B0100000E0E0F0F001032323232000E0E0E474747474747474747474747474747474747474747474747474747470F0F0E000F0F0F0F0F0F0F3200001D1D161D1D02000000000E0E00103200000000000000474747474747474747474747474747474747474747474747474747470F0E00000E1717170E0F0F0E000000003832000000000000000000100F0F323232000000474747474747474747474747474747474747474747474747474747470F00000000182218010E0F00000030303232300000000000321132140F0F0F3200000000004747474747474747474747474747474747474747474747474747470E0F0000001D451D02000E000F323232100000000032323232100F0F17171700000F000047474747474747474747474747474747474747474747474747474747470F0F0000003900000000000F320000131010323232101010140F0F18211801000F000047474747474747474747474747474747474747474747474747474747470E0F0F000000000F0F0F0F0F0F323200000000000F0F0F0F0F0F0E1D261D02000F00004747474747474747474747474747474747474747474747474747474747470E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00003900000F0F0000474747474747474747474747474747474747474747474747474747474747470E0E0E0E0E0E0E0E0E0E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000F0F0F000047474747474747474747474747474747474747474747474747474747474747474747474747474747470E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E00004747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747";
			const string blighted_crescent = "0A040404040404040404040404040404040405000E0E0F0F0F0E0E0E0F0F0F0F0F0F0F0F0F0E0F0F0E0F0F0F47474747474747474747474747474747474747470A012F2F00002F2F2F2F2F2F003232000000003200000E0E0E0000000E0F0F0F0F0E0F0F0E000E0E000F0E0F0F0F4747474747474747474747474747474747470A0100000000322F2F2F2F2F17171700171717000000000000000000000F0F0F0F000E0E00000000000E000F0F0F4747474747474747474747474747474747470A0100171717002727270E0F18231801182418010B0F000000000F00000F0F0F0E0F00000000000000000E0E0F0F0F47474747474747474747474747474747470A013218211828272727270E1D531D021D5D1D020C0E0F0E00000F00000F0F0F000F0E0000000000000000000E0F0F47474747474747474747474747474747470A01001D361D29272727270030380000323830300C320F0E000F0F00000E0F0F0E0E00000000000000000000000F0F0F474747474747474747474747474747470A0130303830302727272727272B2727272B27270C320E0F000F0F0F00000F0F000000000000000000000000000F0F0F0F4747474747474747474747474747470A0132001310102A2A2A2A2A10101010101400320C32320E000F0F0F00000F0F000000000000000000000000000E0F0F0F4747474747474747474747474747470A012F32322F00272727272732323200000000000C3232320E0F0F0F00000F0F000000000000000000000000000E0F0F0F4747474747474747474747474747470A012F320F0F0F272727272710322F2F2F2F0F0F0C32320F320F0F0F00000F0E00000000000000000000000000000E0F0F0F47474747474747474747474747470A0132321717172727272727100F0F0F0F000F0F0C32320F0F0F0F0F00000F0F0F000000000000000000000000000F0F0F0F47474747474747474747474747470A0132321822182827272727100E101915000F0F0C320F0F0F0F0F0F00000F0F0F0E000000000000000000000F0F0F0F0F0F0F474747474747474747474747470A0132321C491C29272727271000101818010F0F0C320F0F0F0F0F0F00000E0F0F00000000000000000000000F0F0F0F0F0F0F474747474747474747474747470A01323232383232322F2F2F10001D161C020F0F0C0F0F0F0F0F0F0F0000000F0F0F0F000F0F00000E0F00000E0F0F0F0F0F0F474747474747474747474747470A0132323213101032101010140F321032000F0F0C0F0F0F0F0F0F0F0F00000F0F0F0F0F0F0E00000F0F0F0F000F0F0F0F0F0E474747474747474747474747470A010F0F0F0F321032320F0F0F0F3210320F0F0F0C0F0F0F0F0F0F0F0F0E000F0F0F0E0E0E0000000F0F0F0F0F0F0F0F0F0E47474747474747474747474747470A010F1017150F100F171717170F0010000E0F0F0C0F0F0E0F0F0F0F0F00000E0F0E0000000E00000F0F0F0F0F0F0F0F0F4747474747474747474747474747470A010F1018180F100F181818180F0010322F0E0F0C0F0E320F0F0F0F0F000E0E0E0000000000000F0F0F0F0F0F0F0F0F0F4747474747474747474747474747470A010F1D161C0F100F1C1C251C0F00323232320F0C0F32320E0F0F0F0F000000000000000F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747474747474747470A010E3210320F100E1C1C711C0F3210002F320F0C0F0F0F320F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747474747474747470A01323210300E1032000038320E00102F002F0F0C0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747474747474747470A0100323210101032323210101010143232000E0C0E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747474747474747470A010000000000320E0E0E100E0E0E320E0E0E0E0C000E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F47474747474747474747474747474706070707070707070707091006070707070707070900000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F47474747474747474747474747474747474747474747474747474747474747474747474700000E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747474747474747474747474747474747474747474747474747474747000000000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747474747474747474747474747474747474747474747474747474747470000000E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F474747474747474747474747474747474747474747474747474747474747474747474747000000000E0E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747474747474747474747474747474747474747474747474747474747470000000000000F0F0F0F0F0F0F0F0E0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747474747474747474747474747474747474747474747474747474747470000000000000E0F0F0F0F0F0F0F000F0F0F0F0F0F0F0F0F0F0F0F0F474747474747474747474747474747474747474747474747474747474747474747474747000000000000000E0F0F0F0E0E0E000E0E0F0F0E0E0E0E0E0E0E0E0E47474747474747474747474747474747474747474747474747474747474747474747474700004747474747470E0E0E0E000000000E0E0E00000000000000000047474747474747474747474747474747474747474747474747474747474747474747474700004747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000047474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470000474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470F0F0F0F0F0F47474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470F0F0F0F0F0F0F0F0F0F4747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F474747474747474747474747474747474747474747474747474747474747474747474747474747474747000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F47474747474747474747474747474747474747474747474747474747474747474747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F474747474747474747474747474747474747474747";
			const string blighted_onrac = "0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E0E0E0E0E0E0E0E0E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F0F0F0F0E0E0E0E0F0F0F0F0F0F0E0E0E0E0E0E0E0F0F0A040303030303030B0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F0F0F0E323232320E0F0F0F0F0F310032320000000E0F0A2F002F002F002F0C0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F0F0E3132101715000F0F0F0F0E00323210100000000F0A000000000000000C0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F0F003232101818010E0F0F0F0000001019150000000F0A002F002F002F000C0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F0F0032321D161C02000F0F0E0032321018180100000F0A000000000000000C0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F0F32003232320032000F0F323232321D161C0200000F0A002F002F002F000C0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470E0F00323232103200000F0F003232323210000000000F0A000000000000000C0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F27272727272727274747474747474747470E323200323232322F0E0E2F00002F3232002F002F0F0A2F00000000002F0C0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F27272727272727274747474747474747470030303032100030300000303030300010003030300E0607070800060707090F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F27272727272727274747474747474747470000000032320000003232000000000010000000000000002F0010002F00000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F2727272727272727474747474747474747000032323232103210103232323210101032321010101010101014003200000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F2727272727272727474747474747474747000000003232000000003232000000001032323232323200000000003232000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F2727272727272727474747474747474747000F0F0F0F0F0F0F0F0F0F32320032321032003232321000000000323232000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F27272727272727274747474747474747470F0F0E0E0E0E0E0E0E0F0F0F0000000010000000323210000000000000000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F0E2727272727272727270E0F32321010140032320000323232320032000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F27171717171717171717270E3232000E0E0E0E0E0E3232320E0E0E0E0E0E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F271818181B181B181818270E1000000E11171717171710171717171712000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F271818181D251D181818280E1032320E101B1823181B151B1824181B15000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F271B181B1D731D1B181B280E1032320E101C1C571C1C161C1C611C1C16000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F272727272727272747474747474747470F271D1D1D0138001D1D1D280E3232320E1310103C101010101038101014000F0F0F0F0F0F0F0F0F0F0F0F0F0E0E0E0E272727272727272747474747474747470F271D1D1D0232321D1D1D290E1032000E0E0E0E0E0E0E0E0E320E0E0E0E0F0F0F0F0F0F0F0F0F0F0F0F0F0E27272727272727272727272747474747474747470F270E000000103232000E270E10101010101010101010101032323232000F0F0F0F0F0F0F0F0F0F0F0F0F27270E470E272727272727272747474747474747470F270E000011101200000E270E10323232000000323200000000323232320F0F0F0F0F0F0F0F0F0F0F0F0F270E00000E272727272727272747474747474747470F2732323232321000000E270E10323232323232000032003232323200000F0F0F0F0F0F0F0F0E0E0E0E0E2732000E0E272727272727272747474747474747470F270E323213101400000E27272B272727272727272727272727320032320F0F0F0F0F0F0F0F282727272727000E0E00272727272727272747474747474747470F270E323232323232000E270E10000000000000000000000027323232320F0F0F0F0E0E0E0E290E0E0000000032000E272727272727272747474747474747470F270E0E0E0E100E0E0E0E273232323232000000000000000027272727270F0F0F0F2827272727323232000E0E0E0E27272727272727272747474747474747470F27272727272B27272727270E10323232323232320000000027003232000E0E0E0E0E32000E0E000E0E0E0E0E111010272727272727272747474747474747470F0F0F0F0F0F100E0E0E0E0E111010101010101032321032102A10103232101010101010101010101010101010104827272727272727272747474747474747470F0F0F0F0F0F13101010101014000000000032323200000000270E0E0E0E32323200000E0E0E0E0E00000E0E0E131010272727272727272747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0000003232000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F000E0E0E27272727272727272747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F000000000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F000E0E0E272727272727272747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F27272727272747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F27272727272747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F27272727272747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F27272727272747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E27272727272747474747474747470E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E00000E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E0E47272727272727474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747472727272727274747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747472727272727272747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727272727272727474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727272727272727274747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747272727272727272747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747472727272727272727474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727272727272727274747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747272727272727272747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747472727272727272727474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727272727272727274747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747272727272727272747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747472727272727272727474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727272727272727274747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747272727272727272747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747472727272727272727474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474727272727272727274747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747272727272727272747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F";
			const string blighted_gaia = "474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470F0F0F0F0F0F47474747474747474747474747474747474747474747474747474747474747474747474747470047474747474747474730303030474747470F0F0F0F0F0F0F0F0F0F0F474747474747470F0F0F0F0F0F0F0F0F0F0F0F4747474747474747474747474747474747474747474747474747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000000000000004747474747474747474747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0000303030000047474747474747474747474730303030300F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000047474747474747474747474747470F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00474747474747474747473030300F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747474747470F0F0F0F0F0E0E0E0E0E0E0E0E0E0E0E0E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F474747474747474747470F0F0F0F0F0F0E3030303030323210103230300E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E0E0E0E0E0E0F0F0F0F0F0F0F0F0F0F4747474747474747470F0F0F0F0F0F0F000F31000E0E32101815180E0F000E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E2727272727270E0F0F0F0F0F0F0F0F0F4747474747474747470F0F0F0F0F0F0E000F00000032101018181B010F00000E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F27272727272727270F0F0F0F0F0F0F0F0F4747474747474747470F0F0F0F0F0E00000F00000000321C161C1C020F000E000E0F0F0F0F0F0F0F0F0F0F0F0F0F0F27272727272727270F0F0F0F0F0F0F0F0F4747474747474747470F0F0F0F0E00000030300F00000F0F100F0F000F000000000E0F0F0E0E0E0E0F0F0F0F0F0F0F27272727272727270F0F0F0F0F0F0F0F0F4747474747474747470E0F0F0F0000000000320F00000000100000003200000000000E0E2F2F2F2F0F0F0F0F0F0F0F0E2727272727270F0F0F0F0F0F0F0F0F0F474747474747474747320E0E0F0000003200003030303030113030323000000E000E00002F2F2F2F0F0F0F0F0F0F0F0F0E000000000E0F0F0F0F0F0F0F0F0F0F4747474747474747470000000E0000323200000000000000100000000000000000000032000000000E0F0F0F0F0F0F0F0F0E000E000F0E0F0F0F0F0F0F0F0F0F47474747474747474700320032000000000000000000320010000000000F323200000E0000000E00000E0F0F0F0F0F0F0E0000000E0E0F0F0F0F0F0F0F0F0F0F4747474747474747470F3200000000000000000000000000320000000F0F0F0F320000000F0F000000000F0F0F0F0F0F000E000E000F0F0F0F0F0F0F0F0F0F0E4747474747474747470F0F0000003200001110101010101032320F0F0F0F0F0F0F0F0F0F0F0F000000000F0F0F0F0F0E00000000000E0F0F0F0F0E0E0E0E0E004747474747474747470F0F0F00323200323200000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E00000F0F0F0F0F0F0000000E0000000E0E0E0E00000E0000004747474747474747470F0F0F0F0F0F320032000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000E0F0F0F0F0F0F00000E0000000000000000000000000E004747474747474747470F0F0F0F0F0F0F00100F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E0000000F0F0F0F0F0F0F00000000000E000F0F0F0F0F0F0F0F004747474747474747470F0F0F0F0F0F0F00100F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E0000000F0F0F0F0F0F0F0F0F00000E00000F0F0F0F0F0F0F0F0F0F4747474747474747470F0F0F0F0E0E0F0F100F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F000E00000F0F0F0F0F0F0F0F0F0F000000000F0F0F0F0F0F0F0F0F0F4747474747474747470F0F0F0E32000E0F100F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F000000000F0F0F0F0F0F0F0F0F0E0000000F0F0F0F0F0F0F0F0F0F0F4747474747474747470F0F0E000000000E100F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000E0E0E0F0F0F0F0E0E0E00000F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747470F0E323232101010100F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000000000E0E0E0E000000000F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747470F32320E10171532100F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F00000000000E0000000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747470F0E103232181801100F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F000E000000000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747470F00320E101D1D02100F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F000000000F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F4747474747474747470F0E323210303030100F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E0F0F0E0E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E4747474747474747470F0E131032101010140F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F000E0E00000E0E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E0E0E004747474747474747470F0F00001000320F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E001717171717000E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E000000004747474747474747470F0F0F0010000F0F0F0F0F0F0F0E0E0E0F0F0F0F0F0F0F0F0E0E0E000E182318241801000F0F0F0F0F0F0F0F0F0F0F0F0E0E00000000004747474747474747470F0F0F0F10000F0F0F0F0F0E0E2F2F2F0E0F0F0F0F0F0F0E00000000321D561D601D020E0F0F0F0F0F0F0F0F0F0F0F0E000000000000004747474747474747470F0F0E0E10000F0F0F0F0E0000000000000E0E0E0E0E0E00320E0E0E00003900390000320F0F0F0F0F0F0F0F0F0F0E000000000E0E0E0E4747474747474747470F0F3200100F0F0F0E0E0000000000000000000000003232320032000000320E0E0E00000F0F0F0F0F0F0F0E0E0E000000000E000000004747474747474747470F0F3232320F0F0E000000002F2F2F2F2F000000000032003200320E0E0E0E000000320F0F0F0F0F0F0F0E0000000000000000000000004747474747474747470F0F0F00100E0E00000F0F0F2F2F2F2F2F0F0F0F0F0F0F3200000032000E0000000F0F0F0F0F0F0F0F0E000000000000000000000000004747474747474747470E0F0F32103200000F0F0F0F0F2F322F0E0E0F0F0F0F0F0F000032000000000F320F0F0F0F0F0F0F0E00000000000E0E0E320E320E0000474747474747474747000F0F0F100000000F0F0F0F0E00320000000E0E0E0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0E0E0E000000000000003200323200000E00474747474747474747000E0F0F1000320F0F0E0E0E003232320000000000320E0E0E0E0E0E0E0E0E0E0E0E0E0E0E00320000000000000000003200000000000E47474747474747474700000F0E3232320F0F1010101010323232101032323210101010101010101010101010101032101010101032321032101010101010101247474747474747474700000F001032000F0F1010101010101010321010321010171717171717171010321010103232101010103210321010101010101010101047474747474747474700000E0010000F0E0E1010171717171717171717000A031818181B181818050B001010102F0E0E171717172F2F0F301717171730300F104747474747474747470000000010000E00001010182118181818182218010A0F1C1C1C251C1C1C010C001010102F000018231818012F0F111818241815120F1047474747474747474730300000103030303010101D3E1D1C1D1C1D4A1D020A0E1D1D1D721D1D1D020C001010102F00001D551D1D02320F131C1C5F1C16140F1047474747474747474700000000103200000010102F3C2F2F2F2F323800000607070709380607070709003210100E0E0E0E380E0E0E0E0E303030383030300E104747474747474747471010323210323210321010101010101032321010101032101010101032101010101010101010101010101010101010101032101032101047474747474747474732101032101032101010101032101032101010101010103210101010101010103210321010101010101010101010323232101010323214474747474747474747000000000000003200000032320000000032000000000000000000000000003232000000000000000000000010100032000000000000004747474747474747473030303030303030303030303200000000000000000000000032003030303030303030303030303030303000101000303030303030300047474747474747474700000000000000000000000000320000003200000000000000323200000000000000000000000000000000001010000000000000000000474747474747474747000000000000000000000E0E0E0E0E0E0E0E00000000000032000000000000000E0E0E0E0E0E0000000000001010101010101010101012474747474747474747000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013101010101010101010104747474747474747470000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101047474747474747474700004700003030303030303000000030303030303030303000000000303030303000000000303030303030303030303030303030001314474747474747474747474747474747474747474747474747474747474747470047474747474747474747474747474747474747474747474747474747474747474747";
			const string blighted_lefein = "000000000000000000000000000000000000000000000047474747474747474700000000000000000000000000000000000000000E0000000000000000000000000000000000000000000000000000000000000000000047474747474747474700000E000E000000000000000000000000000E0E0017171717000E000000000047000A040404040504040404040404040B47474747470A040404040404040404040E0E0E0E0E00000000000000000000000E0E0E001A23241A010E0E0000000047000A10101010101010101010101010030404040404051010101010101010101010100E0E32320000000000000000000E000E00001C58621C020E000000000047000A1010171510171717171717171017171517151715101717171010171510171717103232323200320000000000000000000000000000000000000000000000000A10101818151B181B181B181B151B181818161818151B181B15101818151B181B150E00323232000032320000000000000E0E000E00000E0E000000000000000A101D161C161C1D1C1D1C1D1C161D161C161D161C161C1D1C161D161C161C1D1C160B0000000000000032323232323200000E0E0000000E00000000000000000A102F002F102F002F002F002F1032322F102F002F102F002F102F002F102F002F100E00000000000000323232320000000000000000000000000000000000000A1010103232101010101010323232323232101010101010101010101010101010100E0E000000320000320000000000000000000000000000000000000000000A103232320E0E0E0E0E0E0E0E0E0E0E1032320E0E0E0E0E0E0E0E0E0E0E0E1032100B0E0E3232003200000000000000000000000000000000000000000000000A323232100E0304040404040405100E1010100E10030404040404040405323232100C0E2F2F2F2F002F2F2F2F002F2F2F2F002F2F2F2F002F2F2F2F000000000A10282727272727272727272727100E1010100E10282727272727272727272727100C002F2F2F2F002F2F2F2F002F2F2F2F002F2F2F2F002F2F2F2F000000000A32283232321010101010101028100E1010100E10283232321010321010101028100C002F2F2F2F002F2F2F2F002F2F2F2F002F2F2F2F002F2F2F2F000000000A3228101010103232103232102810101010101010281010323232103232101028100C002F2F2F2F002F2F2F2F002F2F2F2F002F2F2F2F002F2F2F2F000047470A102A2A2A2A32322A2A10323228103232320E1010281010102A2A2A2A2A2A2A2A100C00000000000000000000000000000000000000000000000000000000000A1028272732321010103232102832323210100E10283210101010323232282727100C00000000000000000000000047000000000000000000000000000047470A1028272732323210323232322810101032101010283232101032321010282727320C47474747474747474747474747000000000000000000000000000000000A102A2A2A2A2A2A2A2A10323228320E323232321028323232322A2A2A32282727320C47474747474747474747474747000000000000000000000000000000000A1028272727271010101010102810100E10323232283232321010102827272727320C47474747474747474747474747000000000000000000000000000000000A3228272727271032323232102810101010101010281010101010102827272727100C47474747474747474747474747000000000000000000000000000000000A32282727272732323210101028100E1010100E10283232102A2A2A2A2A2A2A2A100C47474747474747474747474747000000000000000000000000000000000A32282727272727272710101029100E1032320E10281032322827272727272727100C47474747474747474747474747470000000000000000000000000000000A32282727272727272727272727100E1010320E10282727272727272727272727100C4747474747474747474747474747000000000000000000000000000000060707070707070707070707070813101010101014060707070707070707070707070947474747474747474747474747470000000000000000000000000000004747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474700000000000000000000000000000047474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470000000000000000000000000000004747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474700000000000000000000000000000047474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000000000474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747470000000000000000000000000000004747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474700000000000000000000000000000047474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747000000000000000000000000004700474747474747474747474747474747004747474747474747474747474747470047474747474747474747474747474700474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747004747474747474747474747474747470047474747474747474747474747474700474747474747474747474747474747004747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747474747";

			MapIndex selectedMap = MapIndex.Melmond;

			// Roll 1d8 to see which town was destroyed.
			int start = includeConeria ? 1 : 2;
			switch (Rng.Between(rng, start, 8))
			{
				case 1:
					maps[(byte)MapIndex.Melmond] = new Map(Blob.FromHex(repaired_melmond).ToBytes());
					maps[(byte)MapIndex.ConeriaTown] = new Map(Blob.FromHex(blighted_coneria).ToBytes());
					selectedMap = MapIndex.ConeriaTown;
					// The "repaired Melmond" map defaults to having Coneria's item shop.
					break;
				case 2:
					maps[(byte)MapIndex.Melmond] = new Map(Blob.FromHex(repaired_melmond).ToBytes());
					maps[(byte)MapIndex.Pravoka] = new Map(Blob.FromHex(blighted_pravoka).ToBytes());
					// Replace the item shop in "repaired Melmond" with the blighted town's item shop.
					maps[(byte)MapIndex.Melmond][0x0F, 0x1B] = 0x78;
					selectedMap = MapIndex.Pravoka;
					break;
				case 3:
					maps[(byte)MapIndex.Melmond] = new Map(Blob.FromHex(repaired_melmond).ToBytes());
					maps[(byte)MapIndex.Elfland] = new Map(Blob.FromHex(blighted_elfland).ToBytes());
					maps[(byte)MapIndex.Melmond][0x0F, 0x1B] = 0x79;
					selectedMap = MapIndex.Elfland;
					break;
				case 4:
					maps[(byte)MapIndex.Melmond] = new Map(Blob.FromHex(repaired_melmond).ToBytes());
					maps[(byte)MapIndex.CrescentLake] = new Map(Blob.FromHex(blighted_crescent).ToBytes());
					maps[(byte)MapIndex.Melmond][0x0F, 0x1B] = 0x7A;
					selectedMap = MapIndex.CrescentLake;
					break;
				case 5:
					maps[(byte)MapIndex.Melmond] = new Map(Blob.FromHex(repaired_melmond).ToBytes());
					maps[(byte)MapIndex.Gaia] = new Map(Blob.FromHex(blighted_gaia).ToBytes());
					maps[(byte)MapIndex.Melmond][0x0F, 0x1B] = 0x7B;
					selectedMap = MapIndex.Gaia;
					break;
				case 6:
					maps[(byte)MapIndex.Melmond] = new Map(Blob.FromHex(repaired_melmond).ToBytes());
					maps[(byte)MapIndex.Onrac] = new Map(Blob.FromHex(blighted_onrac).ToBytes());
					maps[(byte)MapIndex.Melmond][0x0F, 0x1B] = 0x7C;
					selectedMap = MapIndex.Onrac;
					break;
				case 7:
					maps[(byte)MapIndex.Melmond] = new Map(Blob.FromHex(repaired_melmond).ToBytes());
					maps[(byte)MapIndex.Lefein] = new Map(Blob.FromHex(blighted_lefein).ToBytes());
					// If Lefein is attacked when Hospitality is active, restore the Inn (Clinic is still destroyed)
					if (lefeinHospitality)
					{
						List<Blob> restoredInn = new List<Blob>
						{
							Blob.FromHex("171717"),
							Blob.FromHex("1B251B"),
							Blob.FromHex("1C711C"),
						};
						maps[(int)MapIndex.Lefein].Put((0x10, 0x04), restoredInn.ToArray());
					}
					selectedMap = MapIndex.Lefein;
					// Lefein never had an item shop so we fall back on the default Coneria.
					break;
				case 8:
					selectedMap = MapIndex.Melmond;
					break;
					// Case 8 is that Melmond stays the blighted one so nothing needs to be done.
			}

			AttackedTown = selectedMap;
		}
	}
}
