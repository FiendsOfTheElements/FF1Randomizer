@using FF1Lib;


<div id="Classes" class="tabcontent framed-content clearfix @(noTabLayout ? "no-tab" : "") @(IsOpen ? "" : "collapsed")">
	<h3 class="@(IsOpen ? "" : "h3-collapsed")"><a class="@(noTabLayout ? "collapsible-header" : "")" @onclick="(() => IsOpen = (!noTabLayout || !IsOpen))">Classes</a></h3>
	@if(IsOpen)
	{
<div class="col1">
	<h4>Class Balance</h4>
	<CheckBox UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.Transmooglifier == false)" Id="doubleBBCritCheckBox" @bind-Value="Flags.BBCritRate">Halve BB Crit Rate</CheckBox>
	<CheckBox UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.Transmooglifier == false)" Id="thiefHitCheckBox" @bind-Value="Flags.ThiefHitRate">Double Thief &amp; Ninja Hit% Growth</CheckBox>
	<EnumDropDown UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.Transmooglifier == false)" Id="thiefAgilityBuffDropDown" TItem="ThiefAGI" @bind-Value="Flags.ThiefAgilityBuff">Better Thief &amp; Ninja Agility</EnumDropDown>
	<CheckBox UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.Transmooglifier == false)" Id="fixHitChanceCapCheckBox" @bind-Value="Flags.FixHitChanceCap">Raise Hit % Cap</CheckBox>
	<EnumDropDown UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.Transmooglifier == false)" Id="MDefModeDropDown" TItem="MDEFGrowthMode" @bind-Value="Flags.MDefMode">MDEF Growth:</EnumDropDown>
	<CheckBox UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.Transmooglifier == false)" Id="WhiteMageHarmEveryoneCheckBox" @bind-Value="Flags.WhiteMageHarmEveryone">Improved HARM for White Mage</CheckBox>
			<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.Transmooglifier == false)" Id="Lockpicking" @bind-Value="Flags.Lockpicking">Thief Lockpicking</TriStateCheckBox>
			<IntSlider Indent Min="1" Max="50" Step="1" DisableTooltip UpdateToolTip="@UpdateToolTipID" IsEnabled="Flags.Lockpicking" Id="LockpickingLevelRequirement" @bind-Value="@Flags.LockpickingLevelRequirement">Lockpicking Level Requirement:</IntSlider>
    <TriStateCheckBox UpdateToolTip="@UpdateToolTipID" Id="ReducedLuckCheckBox" @bind-Value="Flags.ReducedLuck">Reduced Luck</TriStateCheckBox>

	<div class="checkbox-cell"></div>

	<h4>Class Randomization</h4>
	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.RandomizeClass != true && Flags.RandomizeClassChaos != true)" Id="TransmooglifierCheckBox" @bind-Value="Flags.Transmooglifier">Transmooglifier</TriStateCheckBox>
	<TriStateCheckBox Indent UpdateToolTip="@UpdateToolTipID" IsEnabled="@Flags.Transmooglifier" Id="GuaranteeCustomClassCompositionCheckBox" @bind-Value="Flags.GuaranteeCustomClassComposition">Guarantee Custom Party Composition</TriStateCheckBox>
	<TriStateCheckBox Indent UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.Weaponizer == false)" Id="MooglieWeaponBalanceCheckBox" @bind-Value="Flags.MooglieWeaponBalance">Balance Weapons for Customs</TriStateCheckBox>
	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.RandomizeClass != true && Flags.Transmooglifier != true)" Id="RandomizeClassChaosCheckBox" @bind-Value="Flags.RandomizeClassChaos">Chaos Mode</TriStateCheckBox>

	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.RandomizeClassChaos != true && Flags.Transmooglifier != true)" Id="RandomizeClassCheckBox" @bind-Value="Flags.RandomizeClass">Blursed Classes</TriStateCheckBox>
	<IntSlider Indent Min="0" Max="3" Step="1" DisableTooltip UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.RandomizeClass != false)" Id="RandomizeClassMaxBonusSlider" @bind-Value="@Flags.RandomizeClassMaxBonus">Bonuses:</IntSlider>
	<IntSlider Indent Min="0" Max="3" Step="1" DisableTooltip UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.RandomizeClass != false)" Id="RandomizeClassMaxMalusSlider" @bind-Value="@Flags.RandomizeClassMaxMalus">Maluses:</IntSlider>

	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" Indent IsEnabled="@(Flags.RandomizeClass != false)" Id="RandomizeClassIncludeXpBonusCheckBox" @bind-Value="Flags.RandomizeClassIncludeXpBonus">Add XP Bonuses</TriStateCheckBox>
	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" Indent IsEnabled="@(Flags.RandomizeClass != false)" Id="RandomizeClassInnateMagicCheckBox" @bind-Value="Flags.RandomizeClassCasting">Add Innate Magic Bonuses</TriStateCheckBox>
	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" Indent IsEnabled="@(Flags.RandomizeClass != false)" Id="RandomizeClassKeyItemsCheckBox" @bind-Value="Flags.RandomizeClassKeyItems">Start with Key Items</TriStateCheckBox>
	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" Indent IsEnabled="@(Flags.RandomizeClass != false)" Id="RandomizeClassFriendshipRuneCheckBox" @bind-Value="Flags.RandomizeClassFriendshipRune">Add Friendship Rune</TriStateCheckBox>
	<IntSlider Indent Min="0" Max="4" Step="2" DisableTooltip UpdateToolTip="@UpdateToolTipID" IsEnabled="Flags.RandomizeClassFriendshipRune" Id="FriendshipRuneDivisor" @bind-Value="@Flags.FriendshipRuneDivisor">Damage Divisor:</IntSlider>

	<div class="checkbox-cell"></div>
	<h4>Promotion</h4>
	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" IsEnabled="@(Flags.Transmooglifier == false)" Id="EnableRandomPromotions" @bind-Value="Flags.EnableRandomPromotions">Random Classes at Class Change</TriStateCheckBox>
	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" Indent IsEnabled="@Flags.EnableRandomPromotions" Id="RPIncludeBaseClasses" @bind-Value="Flags.IncludeBaseClasses">Include Base Classes</TriStateCheckBox>
	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" Indent IsEnabled="@Flags.EnableRandomPromotions" Id="RPSpoilers" @bind-Value="Flags.RandomPromotionsSpoilers">Spoil Promotions</TriStateCheckBox>

	<div class="checkbox-cell"></div>
			<h4>Levels</h4>
			<EnumDropDown UpdateToolTip="@UpdateToolTipID" Id="startingLevelDropDown" TItem="StartingLevel" @bind-Value="Flags.StartingLevel">Starting Level:</EnumDropDown>
			<DoubleSlider UpdateToolTip="@UpdateToolTipID" DoubleCol Id="MaximumLevelDoubleSilder" MinValue="1" MaxValue="50" Step="1" @bind-ValuesRange="(Flags.MaxLevelLow, Flags.MaxLevelHigh)">Max Level:</DoubleSlider>

</div>
<div class="col2">
	<h4>Magic Charges</h4>
	<EnumDropDown UpdateToolTip="@UpdateToolTipID" Id="MpGainOnMaxGainModeDropDown" TItem="MpGainOnMaxGain" @bind-Value="Flags.MpGainOnMaxGainMode">MP Charges Restore On New Max MP:</EnumDropDown>
    <TriStateCheckBox UpdateToolTip="@UpdateToolTipID" Id="EarlierHighTierMagic" @bind-Value="@Flags.EarlierHighTierMagic">Earlier High-Tier Magic Charges</TriStateCheckBox>
	<TriStateCheckBox UpdateToolTip="@UpdateToolTipID" Id="ChangeMaxMP" @bind-Value="@Flags.ChangeMaxMP">Max MP</TriStateCheckBox>
	<IntSlider Indent Min="1" Max="9" Step="1" DisableTooltip UpdateToolTip="@UpdateToolTipID" IsEnabled="@Flags.ChangeMaxMP" Id="RedMageMaxMP" @bind-Value="@Flags.RedMageMaxMP">Red Mage Max MP:</IntSlider>
	<IntSlider Indent Min="1" Max="9" Step="1" DisableTooltip UpdateToolTip="@UpdateToolTipID" IsEnabled="@Flags.ChangeMaxMP" Id="WhiteMageMaxMP" @bind-Value="@Flags.WhiteMageMaxMP">White Mage Max MP:</IntSlider>
	<IntSlider Indent Min="1" Max="9" Step="1" DisableTooltip UpdateToolTip="@UpdateToolTipID" IsEnabled="@Flags.ChangeMaxMP" Id="BlackMageMaxMP" @bind-Value="@Flags.BlackMageMaxMP">Black Mage Max MP:</IntSlider>
	<IntSlider Indent Min="1" Max="9" Step="1" DisableTooltip UpdateToolTip="@UpdateToolTipID" IsEnabled="@Flags.ChangeMaxMP" Id="KnightMaxMP" @bind-Value="@Flags.KnightMaxMP">Knight Max MP:</IntSlider>
	<IntSlider Indent Min="1" Max="9" Step="1" DisableTooltip UpdateToolTip="@UpdateToolTipID" IsEnabled="@Flags.ChangeMaxMP" Id="NinjaMaxMP" @bind-Value="@Flags.NinjaMaxMP">Ninja Max MP:</IntSlider>
	<div class="checkbox-cell"></div>
	<CheckBox UpdateToolTip="@UpdateToolTipID" Id="AllSpellLevelsForKnightNinja" @bind-Value="Flags.AllSpellLevelsForKnightNinja">Knight and Ninja Gain Charges in All Levels</CheckBox>

	<div class="checkbox-cell"></div>
	<div class="row">
		<h4>Class XP Bonus</h4>
		<ToolTipBox id="ClassXpBonus" UpdateToolTip="@UpdateToolTipID"></ToolTipBox>
	</div>

	<div class="container">
		<div class="row">
			<div class="col-lg-4 noleftpadding">Fighter:</div>
			<div class="col-lg-4">@Math.Round(Flags.ExpMultiplierFighter * 0.1, 1).ToString("F1")x</div>
			<div class="col-slider">
				<Slider @bind-Value="Flags.ExpMultiplierFighter" Min="5" Max="30" Step="1"></Slider>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="col-lg-4 noleftpadding">Thief:</div>
			<div class="col-lg-4">@Math.Round(Flags.ExpMultiplierThief * 0.1, 1).ToString("F1")x</div>
			<div class="col-slider">
				<Slider @bind-Value="Flags.ExpMultiplierThief" Min="5" Max="30" Step="1"></Slider>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="col-lg-4 noleftpadding">Black Belt:</div>
			<div class="col-lg-4">@Math.Round(Flags.ExpMultiplierBlackBelt * 0.1, 1).ToString("F1")x</div>
			<div class="col-slider">
				<Slider @bind-Value="Flags.ExpMultiplierBlackBelt" Min="5" Max="30" Step="1"></Slider>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="col-lg-4 noleftpadding">Red Mage:</div>
			<div class="col-lg-4">@Math.Round(Flags.ExpMultiplierRedMage * 0.1, 1).ToString("F1")x</div>
			<div class="col-slider">
				<Slider @bind-Value="Flags.ExpMultiplierRedMage" Min="5" Max="30" Step="1"></Slider>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="col-lg-4 noleftpadding">White Mage:</div>
			<div class="col-lg-4">@Math.Round(Flags.ExpMultiplierWhiteMage * 0.1, 1).ToString("F1")x</div>
			<div class="col-slider">
				<Slider @bind-Value="Flags.ExpMultiplierWhiteMage" Min="5" Max="30" Step="1"></Slider>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="col-lg-4 noleftpadding">Black Mage:</div>
			<div class="col-lg-4">@Math.Round(Flags.ExpMultiplierBlackMage * 0.1, 1).ToString("F1")x</div>
			<div class="col-slider">
				<Slider @bind-Value="Flags.ExpMultiplierBlackMage" Min="5" Max="30" Step="1"></Slider>
			</div>
		</div>
	</div>
</div>


	<div class="clear-it"></div>
	}
</div>


	@code { [Parameter] public FF1Lib.FlagsViewModel Flags { get; set; }
		[Parameter] public Action<string, MouseEventArgs> UpdateToolTipID { get; set; }
		[Parameter] public bool noTabLayout { get; set; }
		[Parameter] public bool IsOpen { get; set; } = true;
		}
